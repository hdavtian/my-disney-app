@import "../../styles/variables.scss";
@import "../../styles/mixins.scss";

// CHARACTER CARD: Circular images matching home page CharacterCircles
.character-card {
    flex: 0 0 auto;
    width: 100%;
    text-align: center;
    position: relative;

    // Large size modifier for quiz
    &--large {
        .character-card__image {
            width: 240px;
            height: 240px;

            @include tablet-up {
                width: 280px;
                height: 280px;
            }

            @include desktop-up {
                width: 320px;
                height: 320px;
            }
        }
    }

    &__link,
    &__content {
        display: block;
        text-decoration: none;
        color: inherit;
        cursor: pointer;
        outline: none; // Remove blue focus outline

        &:hover {
            text-decoration: none;
        }

        &:focus {
            outline: none; // Remove focus outline on click
        }

        &:focus-visible {
            outline: 2px solid var(--disney-gold); // Add visible focus for accessibility (keyboard navigation)
            outline-offset: 2px;
        }
    }

    &__image {
        position: relative;
        width: 120px;
        height: 120px;
        margin: 0 auto var(--space-3);
        border-radius: 50%; // CIRCULAR like home page
        overflow: hidden;
        background: var(--gray-800);
        border: 2px solid rgba(255, 255, 255, 0.8);
        transition: border-color 0.5s ease, box-shadow 0.5s ease;

        @include tablet-up {
            width: 140px;
            height: 140px;
        }

        @include desktop-up {
            width: 160px;
            height: 160px;
        }

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
    }

    &:hover &__image {
        border-color: var(--disney-gold);
        box-shadow: 0 0 15px 2px var(--princess-pink); // Pink glow like home page
    }

    &:hover &__image img {
        transform: scale(1.2);
    }

    &__favorite {
        position: absolute;
        right: 50%;
        bottom: var(--space-12);
        transform: translateX(50%);
        z-index: 15;
    }

    &__overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
        padding: var(--space-2) var(--space-1);
        opacity: 0;
        transition: opacity var(--transition-normal);
        border-radius: 0 0 50% 50%;

        .character-card:hover & {
            opacity: 1;
        }
    }

    &__category-badge {
        font-size: var(--text-xs);
        color: var(--disney-gold);
        font-weight: var(--font-semibold);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    &__name {
        color: var(--white);
        font-size: var(--text-sm);
        font-weight: var(--font-medium);
        margin: 0;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        text-decoration: none;
        @include text-truncate;

        @include tablet-up {
            font-size: var(--text-base);
        }
    }

    &:hover &__name {
        color: var(--disney-gold);
    }

    // SKELETON LOADING STATES
    &__skeleton {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1;
    }

    .skeleton {
        background: linear-gradient(90deg,
                var(--gray-800) 0%,
                var(--gray-700) 50%,
                var(--gray-800) 100%);
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s ease-in-out infinite;
        border-radius: var(--border-radius);

        &--image {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        &--title {
            height: 16px;
            width: 80%;
            margin: 0 auto;
            border-radius: var(--border-radius);

            @include tablet-up {
                height: 18px;
            }
        }
    }

    @keyframes skeleton-loading {
        0% {
            background-position: 200% 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
}